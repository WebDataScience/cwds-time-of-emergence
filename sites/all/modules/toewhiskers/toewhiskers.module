<?php

function toewhiskers_menu() {
  $items['timeline'] = array(
    'page callback' => 'toewhiskers_page_function',
    'page arguments' => array(1, 'foo'),
    'access callback' => TRUE,
  );
  $items['timelinedata'] = array(
    'page callback' => 'toewhiskers_json_query_function',
    'page arguments' => array(1, 'foo'),
    'access callback' => TRUE,
  );
  return $items;
}



function toewhiskers_page_function(){
    // Call theme() function, so that Drupal includes the custom-page.tpl.php template
    drupal_add_js('https://www.google.com/jsapi');
    drupal_add_js("https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['timeline']}]}");
    drupal_add_js(drupal_get_path('module', 'toewhiskers') . '/js/chart.js');
    return theme('timeline_template');
}


function toewhiskers_theme(){
    return array(
        'timeline_template' => array(
            // file name will be page-timeline.tpl.php
            'template' => 'page-timeline',
        ),
    );
}


function toewhiskers_json_query_function(){
  $toedata = array(
    "airtemp" => array('22 C',2020,2025,2032,2036),
    "h2otemp" => array('7 C',2025,2039,2030,2050),
    "windvel" => array('10 mph',2035,2041,2042,2045),
    "precip" => array('50 inchesyr',2020,2030,2025,2040),
  );  
  drupal_json_output($toedata);
}




  